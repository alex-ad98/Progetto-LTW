<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale=1">
    <meta name="author" content="Alessandro De Vitis">
    <meta name="author" content="Tommaso Ercoli">
    <link rel="icon" href="../immagini/logo_sapienza.ico" />
    <title>SapienPIZza | Codice sconto</title>
    <link rel="stylesheet" href="../bootstrap-4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../stili.css" lang="css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery-qrcode-master/src/jquery.qrcode.js"></script>
    <script type="text/javascript" src="jquery-qrcode-master/src/qrcode.js"></script>
    <style>
        body {
            background-image: url('../immagini/pizza7.jpg');
            background-repeat: no-repeat;
            background-size: cover;
            width: auto;
        }
    </style>
    <script>
        function generaCodice() {
            var codice = '';
            var caratteri = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
            for (var i = 0; i < 10; i++) {
                var casuale = Math.floor(Math.random() * caratteri.length);
                codice += caratteri.substring(casuale, casuale + 1);
            }
            return codice;
        }
    </script>
    <script>
        var cod = generaCodice();
        var url_string = window.location.href
        var url = new URL(url_string);
        var nome = url.searchParams.get("name");
        window.onload = function () {
            document.getElementById("passaggioCodice").innerHTML = cod;
            document.getElementById("nomeUtente").innerHTML = nome;
        }
        $(document).ready(function () {
            $("#qrcode").qrcode({
                text: JSON.stringify(cod),
                render: "table",
                width: 160,
                height: 160
            });
        });
    </script>
</head>

<body>
    <!-- Barra Navigazione -->
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark flex-nowrap">
        <div class="navbar-toggler mr-2">
            <span class="navbar-toggler-icon"></span>
        </div>
        <span class="navbar-brand w-100"><img src="/immagini/SapienPizza_Trasp.png" width="150px" height="60px"></span>
        <div class="navbar-collapse collapse w-100 justify-content-center" id="navbar5">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/homepage.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/paginaMenu/menu.html">Men&ugrave;</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/paginaPrenota/prenota.html">Prenota</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/paginaSpesa/spesa.html">Quanto spenderai?</a>
            </li>
          </ul>
        </div>
        <div class="navbar navbar-collapse w-100 justify-content-end">
          
        </div>
    </nav>
    <br>
    <div class="container text-center rounded pb-2 pt-2" style="background-color: rgba(177, 189, 189, 0.65);" >
        <h2>Benvenuto <span id="nomeUtente"></span></h2>
        <h2>Ecco il tuo codice sonto: <span id="passaggioCodice"></span></h2>
        <h4>Ricordati di salvarlo, altrimenti fai uno screenshoot al codice QR e presentalo alla cassa</h4>
        <div class="row">
            <div class="col-sm-5"></div>
            <div class="col-sm-2 ml-2 pt-1">
                <div id="qrcode"></div>
            </div>
            <div class="col-sm-5"></div>
        </div>
        <br>
        <a href="homepage.html" class="badge badge-dark" style="font-size: 18px;">Torna alla Homepage</a>
    </div>
    <div class="page-footer fixed-bottom text-center " id="footer"></div>

</body>

</html>